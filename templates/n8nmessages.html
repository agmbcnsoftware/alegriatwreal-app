<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensajes</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <ul>
                <li><a href="/">Inicio</a></li>
                <li><a href="/reservations">Reservas</a></li>
                <li><a href="/messages">Mensajes</a></li>
                <li><a href="/n8nmessages">Mensajes</a></li>
                <li><a href="/database">Base de Datos</a></li>
            </ul>
        </div>
        <div class="main-content">
            <h1>Mensajes</h1>
          
          <!-- Filtros -->
          <form id="filter-form" method="get" action="/messages" style="margin-bottom: 20px;>
              <label for="date-filter">Filtrar por:</label>
              <select id="date-filter" name="filter">
                  <option value="all" {% if filter_option == "all" %}selected{% endif %}>Todos</option>
                  <option value="today" {% if filter_option == "today" %}selected{% endif %}>Hoy</option>
                  <option value="yesterday" {% if filter_option == "yesterday" %}selected{% endif %}>Ayer</option>
                  <option value="last7days" {% if filter_option == "last7days" %}selected{% endif %}>Últimos siete días</option>
                  <option value="lastmonth" {% if filter_option == "lastmonth" %}selected{% endif %}>Último mes</option>
              </select>
              <button type="submit">Aplicar</button>
          </form>

            <!-- Tabla de mensajes -->
          
            <table>
                <thead>
                    <tr>
                        <th>Tel</th>
                        <th>Nombre</th>
                        <th>Mensaje</th>
                        <th>Fecha</th>
                        <th>Enviado por</th>
                    </tr>
                </thead>
                <tbody>
                    {% for messages in messages %}
                    <tr>
                        <td>{{ messages[0].replace("whatsapp:", "") }}</td>
                        <td>{{ messages[1] }}</td>
                        <td>{{ messages[2] }}</td>
                        <td>{{ messages[3] }}</td>
                        <td>{{ messages[4] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
